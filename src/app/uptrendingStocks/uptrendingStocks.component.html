<div class="container mb-5">
  <div class="mb-5">
    <div class="tab-pane fade show active card">
      <div *ngIf="uptrendingStocks$ | async as uptrendingStocks">
        <div class="card-body">
          <div class="card-subtitle">
            <ul class="mb-0">
              <li>Stocks in confirmed uptrend and at a good buy point.</li>
              <li>Click on the symbol to get more detailed analysis about the stock.</li>
              <li>Click on the industry to see more detailed analysis about the industry and all the stocks in it.</li>
            </ul>
          </div>
        </div>
        <table class="table table-striped table-hover table-bordered">
          <thead>
            <tr>
              <th class="text-center" scope="col">Company</th>
              <th class="text-center" scope="col">Symbol</th>
              <th class="text-center" scope="col">
                <a href="https://www.investopedia.com/terms/i/industry.asp" target="_blank">Industry</a>
                <i class="fa fa-info-circle" title="Industry of a stock" aria-hidden="true"></i>
              </th>
              <th class="text-center" scope="col">Price</th>
              <th class="text-center" scope="col">
                <a href="https://www.investopedia.com/terms/d/dividendyield.asp" target="_blank">Dividend Yield</a>
                <i class="fa fa-info-circle" title="Current Dividend Yield of the stock" aria-hidden="true"></i>
              </th>
              <th class="text-center" scope="col">
                <a href="https://www.investopedia.com/terms/p/price-earningsratio.asp" target="_blank">P/E</a>
                <i class="fa fa-info-circle" title="Current P/E ratio of the stock" aria-hidden="true"></i>
              </th>
              <th class="text-center" scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let uptrendingStock of uptrendingStocks" class="table-row">
              <td class="text-center" style="word-wrap: break-word; min-width: 160px; max-width: 160px">
                {{ uptrendingStock.companyName }}
              </td>
              <td class="text-center">
                <a href="/symbolDetails/{{ uptrendingStock.symbol }}">{{ uptrendingStock.symbol }}</a>
              </td>
              <td
                class="text-center"
                style="word-wrap: break-word; min-width: 160px; max-width: 160px; font-size: 14px"
              >
                <div *ngIf="uptrendingStock.industry">
                  <a href="/subSectorDetails/{{ uptrendingStock.industryId }}">
                    {{ uptrendingStock.industry }}
                  </a>
                  <div *ngFor="let industryBadge of uptrendingStock.industryBadgeList">
                    <span class="badge badge-pill badge-info">{{ industryBadge }}</span>
                  </div>
                </div>
                <div *ngIf="!uptrendingStock.industry">N/A</div>
              </td>
              <td class="text-center">
                <i class="fas fa-arrow-up"></i>
                {{ uptrendingStock.price | currency }}
              </td>
              <td class="text-center">
                {{ uptrendingStock.dividendYield | percent: '1.0-2' }}
              </td>
              <td class="text-center">
                {{ uptrendingStock.peRatio | number: '1.0-2' }}
              </td>
              <td class="text-center">
                <div class="action-btn-group">
                  <button
                    type="button"
                    *ngIf="uptrendingStock.isFavorite === 0"
                    (click)="addToFavorites(uptrendingStock.symbol)"
                    class="btn btn-secondary mb-2"
                  >
                    Add to Favorites
                  </button>
                  <button
                    type="button"
                    *ngIf="uptrendingStock.isFavorite === 1"
                    (click)="removeFromFavorites(uptrendingStock.symbol)"
                    class="btn btn-secondary mb-2"
                  >
                    Remove from Favorites
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <ng-template #noDataDiv>
    <div class="text-center mt-10 mb-2">
      <br />
      <br />
      <a href="/uploadPortfolio">Upload transactions</a> so we can compute this value. You are 1-step away from it.
      <br />
      <br />
    </div>
  </ng-template>
  <ng-template #noOpenPositionsDiv>
    <div class="text-center mt-10 mb-2">
      <br />
      <br />
      Look's like you have none. Add them above so we can alert you when its time to sell.
      <br />
      <br />
    </div>
  </ng-template>
  <ng-template #noFavoritesDiv>
    <div class="text-center mt-10 mb-2">
      <br />
      <br />
      Look's like you have nothing in your favorites.
      <br />
      <br />
    </div>
  </ng-template>
  <ng-template #noClosedPositionsDiv>
    <div class="text-center mt-10 mb-2">
      <br />
      <br />
      Look's like you have none so far.
      <br />
      <br />
    </div>
  </ng-template>
  <ng-template #gain>
    <div class="text-center">
      <img class="card-img-top" src="assets/gain.png" style="height: 40px; width: 40px" alt="Card image cap" />
    </div>
  </ng-template>
  <ng-template #confused>
    <div class="text-center">
      <img class="card-img-top" src="assets/confused.png" style="height: 40px; width: 40px" alt="Card image cap" />
    </div>
  </ng-template>
  <ng-template #loss>
    <div class="text-center">
      <img class="card-img-top" src="assets/loss.png" style="height: 40px; width: 40px" alt="Card image cap" />
    </div>
  </ng-template>
</div>
