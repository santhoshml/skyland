<div class="container">
  <div *ngIf="listDetails$ | async as listDetails">
    <div class="card mb-5">
      <h5 class="card-header">Trading Idea</h5>
      <div class="card-body">
        <h5 class="card-title">{{ listDetails.title }}</h5>
        <hr />
        <div class="row">
          <div class="col-9">
            <p class="card-text lead" [innerHTML]="listDetails.desc"></p>
            <div *ngIf="listDetails.day_change">
              One-day change:
              <span class="ml-2" *ngIf="listDetails.day_change > 0">
                <i class="fas fa-arrow-up"></i>
                {{ listDetails.day_change / 100 | percent: '1.0-2' }}
              </span>
              <span class="ml-2" *ngIf="listDetails.day_change < 0">
                <i class="fas fa-arrow-down"></i>
                {{ listDetails.day_change / 100 | percent: '1.0-2' }}
              </span>
            </div>
          </div>
          <div class="col-3">
            <div class="ver-line pl-4 pr-2 mb-5">
              <ul class="pl-0 mb-5">
                <li class="ml-3 mb-3">
                  <span class="step-text">List of stocks that qualify for the Trading Idea</span>
                </li>
                <li class="ml-3 mb-3">
                  <span class="step-text">Click on a symbol to see more details about it</span>
                </li>
                <!-- <li class="ml-3 mb-3">
                  <span class="step-text"
                    >Upload your old transactions to see the prediction as per you investment style</span
                  >
                </li> -->
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <table class="mt-20 table table-striped table-hover table-bordered">
      <thead>
        <tr>
          <th scope="col">Company Name</th>
          <th scope="col">Symbol</th>
          <th scope="col">Industry</th>
          <!-- <th scope="col">Sector</th> -->
          <th scope="col">Price</th>
          <th scope="col">Trend</th>
          <th scope="col">Cap</th>
          <th scope="col">Dividend yeild</th>
          <th scope="col">PE Ratio</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let listRow of listDetails.list" class="table-row" (click)="getSymbolDetails(listRow)">
          <td>{{ listRow.name }}</td>
          <td>
            <a routerLink="/symbolDetails/{{ listRow.symbol }}">{{ listRow.symbol }}</a>
          </td>
          <td>
            <a href="/subSectorDetails/{{ listRow.industryId }}">{{ listRow.industry }}</a>
          </td>
          <!-- <td>{{ listRow.sector }}</td> -->
          <td>{{ listRow.close | currency }}</td>
          <td>
            <div *ngIf="listRow.strong_uptrend === 1">
              <i class="fas fa-angle-double-up"></i>
              Strong Uptrend
            </div>
            <div *ngIf="listRow.strong_uptrend === 0 && listRow.uptrend === 1">
              <i class="fas fa-arrow-up"></i>
              Uptrend
            </div>
            <div *ngIf="listRow.strong_uptrend === 0 && listRow.uptrend === 0">
              <i class="fas fa-arrow-right"></i>
              Neutral
            </div>
            <div *ngIf="listRow.strong_uptrend === 0 && listRow.uptrend === -1">
              <i class="fas fa-arrow-down"></i>
              Downtrend
            </div>
          </td>
          <td>{{ getPrunedValue(listRow.marketcap) }}</td>
          <td>
            {{ listRow.dividendYield | percent: '1.0-2' }}
          </td>
          <td>{{ listRow.peRatio | number: '1.0-2' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
